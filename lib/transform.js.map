{"version":3,"sources":["../src/transform.js"],"names":["filterByKeys","defsKeys","candidate","keys","intersection","pick","createTransform","definitions","protoMutators","transform","mutators","Object","assign","reduce","memo","value","key","isFunction","defineProperty","get","set"],"mappings":";;;;;;;AAAA;;;;;;;;AAEO,IAAMA,sCAAe,SAAfA,YAAe,CAACC,QAAD,EAAWC,SAAX,EAAyB;AACnD,MAAMC,OAAO,iBAAEC,YAAF,CAAeH,QAAf,EAAyB,iBAAEE,IAAF,CAAOD,SAAP,CAAzB,CAAb;AACA,SAAO,iBAAEG,IAAF,CAAOH,SAAP,EAAkBC,IAAlB,CAAP;AACD,CAHM;;AAKA,IAAMG,4CAAkB,SAAlBA,eAAkB,CAACC,WAAD,EAAiB;AAC9C,MAAMN,WAAW,iBAAEE,IAAF,CAAOI,WAAP,CAAjB;AACA,MAAIC,gBAAgB,EAApB;;AAEA,MAAMC,YAAY,SAAZA,SAAY,CAACP,SAAD,EAAyC;AAAA,QAA7BQ,QAA6B,uEAAlBF,aAAkB;;AACzD,WAAOG,OAAOC,MAAP,CACLZ,aAAaC,QAAb,EAAuBC,SAAvB,CADK,EAEL,iBAAEW,MAAF,CAASH,QAAT,EAAmB,UAACI,IAAD,EAAOC,KAAP,EAAcC,GAAd;AAAA,aAAsBL,OAAOC,MAAP,qBACtCI,GADsC,EAChC,iBAAEC,UAAF,CAAaF,KAAb,IAAsBA,MAAMb,SAAN,EAAiBD,QAAjB,CAAtB,GAAmDc,KADnB,GAEtCD,IAFsC,CAAtB;AAAA,KAAnB,EAEU,EAFV,CAFK,CAAP;AAMD,GAPD;;AASAH,SAAOO,cAAP,CAAsBT,SAAtB,EAAiC,UAAjC,EAA6C;AAC3CU,SAAK;AAAA,aAAMX,aAAN;AAAA,KADsC;AAE3CY,SAAK,aAACV,QAAD,EAAc;AACjBF,sBAAgBE,QAAhB;AACD;AAJ0C,GAA7C;;AAOA,SAAOD,SAAP;AACD,CArBM","file":"transform.js","sourcesContent":["import _ from 'lodash'\n\nexport const filterByKeys = (defsKeys, candidate) => {\n  const keys = _.intersection(defsKeys, _.keys(candidate))\n  return _.pick(candidate, keys)\n}\n\nexport const createTransform = (definitions) => {\n  const defsKeys = _.keys(definitions)\n  let protoMutators = {}\n\n  const transform = (candidate, mutators = protoMutators) => {\n    return Object.assign(\n      filterByKeys(defsKeys, candidate),\n      _.reduce(mutators, (memo, value, key) => Object.assign({\n        [key]: _.isFunction(value) ? value(candidate, defsKeys) : value\n      }, memo), {})\n    )\n  }\n\n  Object.defineProperty(transform, 'mutators', {\n    get: () => protoMutators,\n    set: (mutators) => {\n      protoMutators = mutators\n    }\n  })\n\n  return transform\n}\n"]}