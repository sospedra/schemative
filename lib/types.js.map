{"version":3,"sources":["../src/types.js"],"names":["evaluateValueType","candidate","fallback","console","warn","charge","value","base","defaultValue","charged","baseIsRequired","isRequired","undefined","target","Object","keys","forEach","property","defineProperty","get","createType","scalar","propType","type","getOwnPropertyNames","any","array","bool","element","func","number","object","shape","string","symbol","Symbol"],"mappings":";;;;;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,oBAAoB,SAApBA,iBAAoB,CAACC,SAAD,EAAYC,QAAZ,EAAyB;AACjD,MAAI,QAAOD,SAAP,yCAAOA,SAAP,eAA4BC,QAA5B,yCAA4BA,QAA5B,EAAJ,EAA0C;AACxCC,YAAQC,IAAR,CACE,kCADF,SAESF,QAFT,yCAESA,QAFT,GAEmB,aAFnB,SAEyCD,SAFzC,yCAEyCA,SAFzC,GAGE,MAHF,EAGUA,SAHV,EAGqB,gBAHrB,EAIE,oCAJF;;AAOA,WAAOC,QAAP;AACD;;AAED,SAAOD,SAAP;AACD,CAbD;;AAeA,IAAMI,SAAS,SAATA,MAAS,CAACC,KAAD,EAAQC,IAAR,EAAcC,YAAd,EAA+B;AAC5C,MAAMC,UAAU,oBAAO,EAAP,EAAWF,IAAX,EAAiB;AAC/BD,WAAON,kBAAkBM,KAAlB,EAAyBE,YAAzB,CADwB;AAE/BE,oBAAgB,KAFe;AAG/BC,gBAAYC;AAHmB,GAAjB,CAAhB;;AAMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAMC,SAAS,EAAf;;AAEAC,SAAOC,IAAP,CAAYN,OAAZ,EAAqBO,OAArB,CAA6B,UAACC,QAAD,EAAc;AACzCH,WAAOI,cAAP,CAAsBL,MAAtB,EAA8BI,QAA9B,EAAwC;AACtCE,WAAK;AAAA,eAAMV,QAAQQ,QAAR,CAAN;AAAA;AADiC,KAAxC;AAGD,GAJD;;AAMA,SAAOJ,MAAP;AACD,CAxBD;;AA0BA,IAAMO,aAAa,SAAbA,UAAa,CAACC,MAAD,EAASb,YAAT,EAA0B;AAC3C,MAAMc,WAAW,oBAAUD,MAAV,CAAjB;AACA,MAAMd,OAAOF,OAAOG,YAAP,EAAqB,EAAEa,cAAF,EAAUC,kBAAV,EAArB,EAA2Cd,YAA3C,CAAb;AACA,MAAMe,OAAO,SAAPA,IAAO,CAACjB,KAAD;AAAA,WAAWD,OAAOC,KAAP,EAAcC,IAAd,EAAoBC,YAApB,CAAX;AAAA,GAAb;;AAEA;AACA;AACA;AACAM,SAAOU,mBAAP,CAA2BjB,IAA3B,EAAiCS,OAAjC,CAAyC,UAACC,QAAD,EAAc;AACrDH,WAAOI,cAAP,CAAsBK,IAAtB,EAA4BN,QAA5B,EAAsC;AACpCE,WAAK;AAAA,eAAMZ,KAAKU,QAAL,CAAN;AAAA;AAD+B,KAAtC;AAGD,GAJD;;AAMA,SAAOM,IAAP;AACD,CAfD;;AAiBO,IAAME,oBAAML,WAAW,KAAX,EAAkB,IAAlB,CAAZ;AACA,IAAMM,wBAAQN,WAAW,OAAX,EAAoB,EAApB,CAAd;AACA,IAAMO,sBAAOP,WAAW,MAAX,EAAmB,IAAnB,CAAb;AACA,IAAMQ,4BAAUR,WAAW,SAAX,eAAhB;AACA,IAAMS,sBAAOT,WAAW,MAAX,eAAb;AACA,IAAMU,0BAASV,WAAW,QAAX,EAAqB,CAArB,CAAf;AACA,IAAMW,0BAASX,WAAW,QAAX,EAAqB,EAArB,CAAf;AACA,IAAMY,wBAAQZ,WAAW,OAAX,EAAoB,EAApB,CAAd;AACA,IAAMa,0BAASb,WAAW,QAAX,EAAqB,EAArB,CAAf;AACA,IAAMc,0BAASd,WAAW,QAAX,EAAqBe,OAAO,EAAP,CAArB,CAAf","file":"types.js","sourcesContent":["import { assign, noop } from 'lodash'\nimport PropTypes from 'prop-types'\n\nconst evaluateValueType = (candidate, fallback) => {\n  if (typeof candidate !== typeof fallback) {\n    console.warn(\n      'Evalute Schemative type expected',\n      typeof fallback, 'but receive', typeof candidate,\n      'when', candidate, 'value was set.',\n      'Default value is returned instead.'\n    )\n\n    return fallback\n  }\n\n  return candidate\n}\n\nconst charge = (value, base, defaultValue) => {\n  const charged = assign({}, base, {\n    value: evaluateValueType(value, defaultValue),\n    baseIsRequired: false,\n    isRequired: undefined\n  })\n\n  // return assign({}, charged, {\n  //   isRequired: assign({}, charged, {\n  //     baseIsRequired: true,\n  //     propType: charged.propType.isRequired\n  //   })\n  // })\n\n  // @FIXME Use defineProperties\n  const target = {}\n\n  Object.keys(charged).forEach((property) => {\n    Object.defineProperty(target, property, {\n      get: () => charged[property]\n    })\n  })\n\n  return target\n}\n\nconst createType = (scalar, defaultValue) => {\n  const propType = PropTypes[scalar]\n  const base = charge(defaultValue, { scalar, propType }, defaultValue)\n  const type = (value) => charge(value, base, defaultValue)\n\n  // Object.keys(base).forEach((key) => {\n  //   type[key] = base[key]\n  // })\n  Object.getOwnPropertyNames(base).forEach((property) => {\n    Object.defineProperty(type, property, {\n      get: () => base[property]\n    })\n  })\n\n  return type\n}\n\nexport const any = createType('any', true)\nexport const array = createType('array', [])\nexport const bool = createType('bool', true)\nexport const element = createType('element', noop)\nexport const func = createType('func', noop)\nexport const number = createType('number', 0)\nexport const object = createType('object', {})\nexport const shape = createType('shape', {})\nexport const string = createType('string', '')\nexport const symbol = createType('symbol', Symbol(''))\n"]}